openssl genrsa -out rootCA.key 4096
openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 3600 -out rootCA.crt

openssl genrsa -out server.key 4096

openssl req -new -nodes -out server.csr -key server.key -config server.cnf

openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key  -CAcreateserial -out server.crt -days 3650  -extfile externalserver.ext 

openssl req -new -sha256 \
    -key server.key \
    -reqexts SAN \
    -config san.cnf\
    -out server.csr

openssl rsa -in server.key -pubout -out server.public.key

openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial -out server.crt -days 3600 -sha256